<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∞–±–ª–∏—Ü—ã countries</title>
</head>
<body>
    <h1>–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∞–±–ª–∏—Ü—ã countries</h1>
    <div id="result"></div>

    <script type="module">
        import { createClient } from 'https://cdn.skypack.dev/@supabase/supabase-js@2'

        // –ü–æ–ª—É—á–∞–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑ localStorage –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ç–µ—Å—Ç–æ–≤—ã–µ
        const supabaseUrl = localStorage.getItem('VITE_SUPABASE_URL') || 'YOUR_SUPABASE_URL'
        const supabaseKey = localStorage.getItem('VITE_SUPABASE_ANON_KEY') || 'YOUR_SUPABASE_ANON_KEY'

        const resultDiv = document.getElementById('result')

        if (supabaseUrl === 'YOUR_SUPABASE_URL' || supabaseKey === 'YOUR_SUPABASE_ANON_KEY') {
            resultDiv.innerHTML = `
                <p>‚ùå –ù–µ–æ–±—Ö–æ–¥–∏–º–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ Supabase</p>
                <p>–û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:</p>
                <pre>
localStorage.setItem('VITE_SUPABASE_URL', 'your_supabase_url')
localStorage.setItem('VITE_SUPABASE_ANON_KEY', 'your_supabase_anon_key')
                </pre>
                <p>–ó–∞—Ç–µ–º –æ–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É</p>
            `
        } else {
            const supabase = createClient(supabaseUrl, supabaseKey)

            async function checkCountries() {
                try {
                    resultDiv.innerHTML = '<p>üîç –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ...</p>'
                    
                    const { data: countries, error } = await supabase
                        .from('countries')
                        .select('*')

                    if (error) {
                        resultDiv.innerHTML = `
                            <p>‚ùå –û—à–∏–±–∫–∞: ${error.message}</p>
                            <p>–í–æ–∑–º–æ–∂–Ω–æ, —Ç–∞–±–ª–∏—Ü–∞ countries –Ω–µ —Å–æ–∑–¥–∞–Ω–∞.</p>
                            <p>–í—ã–ø–æ–ª–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏—é –∏–∑ —Ñ–∞–π–ª–∞ MIGRATION_INSTRUCTIONS.md</p>
                        `
                    } else {
                        resultDiv.innerHTML = `
                            <p>‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ!</p>
                            <p>üìä –ù–∞–π–¥–µ–Ω–æ —Å—Ç—Ä–∞–Ω: ${countries?.length || 0}</p>
                            ${countries && countries.length > 0 ? 
                                `<p>üåç –°—Ç—Ä–∞–Ω—ã: ${countries.map(c => \`\${c.name} (\${c.code})\`).join(', ')}</p>` : 
                                '<p>‚ö†Ô∏è –°—Ç—Ä–∞–Ω—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏—é.</p>'
                            }
                        `
                    }
                } catch (err) {
                    resultDiv.innerHTML = `<p>üí• –û—à–∏–±–∫–∞: ${err.message}</p>`
                }
            }

            checkCountries()
        }
    </script>
</body>
</html>




